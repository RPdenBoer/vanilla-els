; =============================================================================
; Vanilla ELS - Dual Board Configuration
; =============================================================================
; UI Board:     ESP32-S3 (JC4827W543) - Display, touch, user interface
; Motion Board: ESP32 (DevKit) - Encoders, stepper, ELS logic
; =============================================================================

[env]
platform = espressif32
framework = arduino
monitor_speed = 115200

; =============================================================================
; UI Board (ESP32-S3 JC4827W543 with display)
; =============================================================================
[env:ui]
board = esp32-s3-devkitc-1

; Set your UI board's COM port here
upload_port = COM39
monitor_port = COM39

board_upload.flash_size = 4MB
board_build.partitions = partitions_ui_ota.csv
board_build.arduino.memory_type = qio_opi

; Only compile UI and shared sources
build_src_filter = 
    +<shared/>
    +<ui/>
    -<motion/>

build_flags =
    -D ARDUINO_USB_CDC_ON_BOOT=1
    -D ARDUINO_USB_MODE=1
    -D LV_CONF_INCLUDE_SIMPLE
    -D TOUCH_MODULES_GT911
    -D BOARD_UI=1
    -I src/shared
    -I src/ui
    -I include

lib_deps = 
    https://github.com/moononournation/Arduino_GFX.git
    https://github.com/lvgl/lvgl.git
    https://github.com/mmMicky/TouchLib.git

; =============================================================================
; UI Board OTA (ESP32-S3)
; =============================================================================
[env:ui_ota]
extends = env:ui
upload_protocol = espota
upload_port = vanilla-els-ui.local

; =============================================================================
; Motion Board (ESP32 DevKit - handles encoders, stepper, ELS logic)
; =============================================================================
[env:motion]
board = esp32dev

; Set your Motion board's COM port here
upload_port = COM5
monitor_port = COM5

; Only compile motion and shared sources
build_src_filter = 
    +<shared/>
    +<motion/>
    -<ui/>

build_flags =
    -D BOARD_MOTION=1
    -I src/shared
    -I src/motion

lib_deps =
    ; Minimal - no display libraries needed

; =============================================================================
; Motion Board OTA (ESP32)
; =============================================================================
[env:motion_ota]
extends = env:motion
upload_protocol = espota
upload_port = vanilla-els-motion.local
